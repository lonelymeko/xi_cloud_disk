# make vs new - é€ŸæŸ¥è¡¨

## ğŸ¯ ä¸€å¥è¯æ€»ç»“

- **`make`**ï¼šåˆå§‹åŒ– slice/map/channelï¼Œè¿”å›**å¯ç”¨çš„å€¼**
- **`new`**ï¼šåˆ†é…å†…å­˜ï¼Œè¿”å›**æŒ‡å‘é›¶å€¼çš„æŒ‡é’ˆ**

---

## ğŸ“Š å¯¹æ¯”è¡¨æ ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    make vs new æ ¸å¿ƒåŒºåˆ«                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç‰¹æ€§       â”‚      make       â”‚            new                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¿”å›å€¼ç±»å‹   â”‚   Tï¼ˆå€¼ï¼‰       â”‚   *Tï¼ˆæŒ‡é’ˆï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‚ç”¨ç±»å‹     â”‚ slice/map/chan  â”‚   æ‰€æœ‰ç±»å‹                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ˜¯å¦åˆå§‹åŒ–   â”‚   âœ… æ˜¯         â”‚   âŒ å¦ï¼ˆåªåˆ†é…é›¶å€¼ï¼‰         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èƒ½å¦ç›´æ¥ä½¿ç”¨ â”‚   âœ… æ˜¯         â”‚   éƒ¨åˆ†ç±»å‹éœ€è¦åˆå§‹åŒ–          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä½¿ç”¨é¢‘ç‡     â”‚   â­â­â­â­â­   â”‚   â­â­                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ å®æˆ˜ç¤ºä¾‹

### âœ… æ­£ç¡®ç”¨æ³•

```go
// slice - ç”¨ make
s := make([]int, 0, 10)    // é•¿åº¦ 0ï¼Œå®¹é‡ 10
s = append(s, 1, 2, 3)

// map - ç”¨ make
m := make(map[string]int)
m["key"] = 1

// channel - ç”¨ make
ch := make(chan int, 5)
ch <- 1

// ç»“æ„ä½“æŒ‡é’ˆ - ç”¨å­—é¢é‡ï¼ˆæ¨èï¼‰
person := &Person{Name: "å¼ ä¸‰", Age: 18}

// ç»“æ„ä½“æŒ‡é’ˆ - ç”¨ newï¼ˆä¹Ÿå¯ä»¥ï¼‰
person := new(Person)
person.Name = "å¼ ä¸‰"
```

### âŒ é”™è¯¯ç”¨æ³•

```go
// âŒ ç”¨ new åˆ›å»º mapï¼ˆè¿”å› nil map æŒ‡é’ˆï¼‰
m := new(map[string]int)
(*m)["key"] = 1  // panic!

// âŒ ç”¨ make åˆ›å»ºç»“æ„ä½“ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰
person := make(Person)  // é”™è¯¯ï¼

// âŒ æœªåˆå§‹åŒ–çš„ map
var m map[string]int
m["key"] = 1  // panic!
```

---

## ğŸ“ è®°å¿†å£è¯€

```
make åªç”¨ä¸‰å…„å¼Ÿï¼Œ
sliceã€mapã€channel è®°å¿ƒé‡Œã€‚
è¿”å›å€¼ç”¨ä¸è¿”æŒ‡ï¼Œ
åˆå§‹åŒ–å¥½ç›´æ¥ç”¨ã€‚

new å•¥éƒ½èƒ½åˆ›å»ºï¼Œ
è¿”å›æŒ‡é’ˆé›¶å€¼ç°ã€‚
ç»“æ„ä½“ç”¨å­—é¢é‡ï¼Œ
ç®€æ´æ˜äº†åˆå¥½çœ‹ã€‚
```

---

## ğŸ“ ä½ çš„ä»£ç 

```go
// âœ… æ­£ç¡®ï¼šåˆ›å»ºç©º sliceï¼Œç”¨äºåç»­ append
uf := make([]*types.UserFile, 0)

// ç­‰ä»·å†™æ³•
uf := []*types.UserFile{}

// ä½¿ç”¨
uf = append(uf, &types.UserFile{
    Id:   1,
    Name: "test.pdf",
})
```

---

## ğŸš€ æœ€ä½³å®è·µ

| éœ€æ±‚ | æ¨èå†™æ³• | åŸå›  |
|------|---------|------|
| åˆ›å»º slice | `make([]T, 0)` æˆ– `[]T{}` | éœ€è¦åˆå§‹åŒ– |
| åˆ›å»º map | `make(map[K]V)` æˆ– `map[K]V{}` | éœ€è¦åˆå§‹åŒ– |
| åˆ›å»º channel | `make(chan T, cap)` | éœ€è¦åˆå§‹åŒ– |
| åˆ›å»ºç»“æ„ä½“ | `&T{}` | æœ€ç®€æ´ |
| åŸºæœ¬ç±»å‹æŒ‡é’ˆ | `&value` | æœ€ç›´æ¥ |

**é¿å…ä½¿ç”¨ newï¼** é™¤éä½ æ˜ç¡®éœ€è¦é›¶å€¼æŒ‡é’ˆã€‚

---

## ğŸ“– å»¶ä¼¸é˜…è¯»

- è¯¦ç»†æ–‡æ¡£ï¼š`docs/Goè¯­è¨€-makeä¸newè¯¦è§£.md`
- ç¤ºä¾‹ä»£ç ï¼š`test/make_vs_new_demo.go`
- è¿è¡Œç¤ºä¾‹ï¼š`cd test && go run make_vs_new_demo.go`
